<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced Police CAD with Chat</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; }
  #sidebar { width: 300px; background: #2c3e50; color: white; display: flex; flex-direction: column; padding: 10px; box-sizing: border-box; }
  #sidebar h2 { margin-top: 0; }
  #sidebar button { margin: 5px 0; padding: 10px; border: none; background: #34495e; color: white; cursor: pointer; }
  #sidebar button:hover { background: #1abc9c; }
  #main { flex: 1; display: flex; flex-direction: column; }

  /* Tables and content sections */
  #calls, #units, #bolos, #arrests, #warrants { flex: 1; overflow-y: auto; padding: 10px; border-bottom: 1px solid #ccc; }
  table { width: 100%; border-collapse: collapse; }
  th, td { border: 1px solid #ccc; padding: 5px; text-align: left; }
  input.unitName { width: 80%; }

  /* Chat area replacing the map */
  #chatContainer {
    flex: 2;
    background: #f5f5f7;
    border-top: 1px solid #ccc;
    display: flex;
    flex-direction: column;
    padding: 10px;
    box-sizing: border-box;
  }
  #chatHeader {
    font-weight: bold;
    margin-bottom: 10px;
  }
  #chatMessages {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    background: white;
    border-radius: 8px;
    border: 1px solid #ccc;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .message {
    max-width: 80%;
    padding: 8px 12px;
    border-radius: 16px;
    background: #e1e1e1;
    align-self: flex-start;
  }
  .message.user { background: #1abc9c; color: white; align-self: flex-end; }
  #chatInputContainer {
    margin-top: 10px;
    display: flex;
    gap: 5px;
  }
  #chatInput {
    flex: 1;
    padding: 10px;
    border-radius: 20px;
    border: 1px solid #ccc;
    outline: none;
  }
  #chatSend {
    padding: 10px 15px;
    border-radius: 20px;
    border: none;
    background: #1abc9c;
    color: white;
    cursor: pointer;
  }
  #chatSend:hover { background: #16a085; }
</style>
</head>
<body>

<div id="sidebar">
  <h2>Police CAD</h2>
  <button onclick="showSection('calls')">Calls</button>
  <button onclick="showSection('units')">Units</button>
  <button onclick="showSection('bolos')">BOLOs</button>
  <button onclick="showSection('arrests')">Arrests</button>
  <button onclick="showSection('warrants')">Warrants</button>
</div>

<div id="main">
  <div id="calls">
    <h3>Active Calls</h3>
    <button onclick="addCall()">Add Call</button>
    <table id="callsTable">
      <thead><tr><th>ID</th><th>Type</th><th>Location</th><th>Status</th><th>Assign</th><th>Action</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="units" style="display:none;">
    <h3>Units</h3>
    <button onclick="addUnit()">Add Unit</button>
    <table id="unitsTable">
      <thead><tr><th>ID</th><th>Name</th><th>Status</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="bolos" style="display:none;">
    <h3>BOLOs / Warrants</h3>
    <button onclick="addBolo()">Add BOLO</button>
    <table id="bolosTable">
      <thead><tr><th>ID</th><th>Description</th><th>Status</th><th>Action</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="arrests" style="display:none;">
    <h3>Arrests</h3>
    <button onclick="addArrest()">Add Arrest</button>
    <table id="arrestsTable">
      <thead><tr><th>ID</th><th>Name</th><th>Reason</th><th>Action</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="warrants" style="display:none;">
    <h3>Arrest Warrants</h3>
    <button onclick="addWarrant()">Add Warrant</button>
    <table id="warrantsTable">
      <thead><tr><th>ID</th><th>Name</th><th>Reason</th><th>Action</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Chat replacing map -->
  <div id="chatContainer">
    <div id="chatHeader">Community Chat</div>
    <div id="chatMessages"></div>
    <div id="chatInputContainer">
      <input id="chatInput" type="text" placeholder="Type a message..." />
      <button id="chatSend">Send</button>
    </div>
  </div>
</div>

<script>
// ---------------- Sections ----------------
function showSection(section) {
  const sections = ['calls','units','bolos','arrests','warrants'];
  sections.forEach(s => document.getElementById(s).style.display = 'none');
  document.getElementById(section).style.display = 'block';
}

// ---------------- Data ----------------
let calls = [], units = [], bolos = [], arrests = [], warrants = [];

// ---------------- BOLOs / Arrests / Warrants ----------------
function renderBolos() { const tbody = document.querySelector('#bolosTable tbody'); tbody.innerHTML=''; bolos.forEach(b=>{tbody.innerHTML+=`<tr><td>${b.id}</td><td>${b.description}</td><td>${b.status}</td><td><button onclick="deleteBolo(${b.id})">Delete</button></td></tr>`;});}
function deleteBolo(id){bolos=bolos.filter(b=>b.id!==id);renderBolos();}
function renderArrests(){const tbody=document.querySelector('#arrestsTable tbody');tbody.innerHTML='';arrests.forEach(a=>{tbody.innerHTML+=`<tr><td>${a.id}</td><td>${a.name}</td><td>${a.reason}</td><td><button onclick="deleteArrest(${a.id})">Delete</button></td></tr>`;});}
function deleteArrest(id){arrests=arrests.filter(a=>a.id!==id);renderArrests();}
function renderWarrants(){const tbody=document.querySelector('#warrantsTable tbody');tbody.innerHTML='';warrants.forEach(w=>{tbody.innerHTML+=`<tr><td>${w.id}</td><td>${w.name}</td><td>${w.reason}</td><td><button onclick="deleteWarrant(${w.id})">Delete</button></td></tr>`;});}
function deleteWarrant(id){warrants=warrants.filter(w=>w.id!==id);renderWarrants();}

// ---------------- Chat ----------------
const chatMessages = document.getElementById("chatMessages");
const chatInput = document.getElementById("chatInput");
const chatSend = document.getElementById("chatSend");

function addMessage(sender, text) {
  const message = document.createElement("div");
  message.classList.add("message");
  if(sender==="You") message.classList.add("user");
  message.textContent = text;
  chatMessages.appendChild(message);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Simple front-end multi-user simulation (anyone can type, appears in chat)
chatSend.addEventListener("click", () => {
  const text = chatInput.value.trim();
  if(!text) return;
  addMessage("You", text);
  chatInput.value = "";
  // For demo, echo back a fake reply
  setTimeout(()=>addMessage("OfficerBot", "Echo: " + text), 500);
});

chatInput.addEventListener("keydown", (e)=>{
  if(e.key==="Enter") chatSend.click();
});
</script>
</body>
</html>
